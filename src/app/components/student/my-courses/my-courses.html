<div class="my-courses-page">
  <header class="page-header">
    <h1>My Courses</h1>
    <p class="subtitle">Track your enrolled courses and continue learning.</p>
  </header>

  <!-- Loading State -->
  <div *ngIf="loading()" class="state state-loading">
    <p>Loading your courses...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error() && !loading()" class="state state-error">
    <p>{{ error() }}</p>
  </div>

  <!-- Empty State -->
  <div
    *ngIf="!loading() && !error() && enrollments().length === 0"
    class="state state-empty"
  >
    <h3>No enrollments yet</h3>
    <p>Browse courses and start your learning journey.</p>
  </div>

  <!-- Enrollments List -->
  <div *ngIf="!loading() && !error() && enrollments().length > 0" class="courses-grid">
    <div *ngFor="let enrollment of enrollments()" class="course-card">
      <div class="course-header">
        <h2 class="course-title">{{ enrollment.courseName || 'Course' }}</h2>
        <span
          class="status-badge"
          [class.completed]="enrollment.isCompleted"
        >
          {{ enrollment.isCompleted ? 'Completed' : 'In Progress' }}
        </span>
      </div>

      <p class="enrollment-date">
        Enrolled on
        {{ enrollment.enrollmentDate | date : 'mediumDate' }}
      </p>

      <div class="progress-bar-wrapper">
        <div class="progress-bar">
          <div
            class="progress-fill"
            [style.width.%]="enrollment.progressPercentage"
          ></div>
        </div>
        <span class="progress-label">
          {{ enrollment.progressPercentage | number : '1.0-0' }}%
        </span>
      </div>

      <div class="card-actions">
        <button
          type="button"
          class="btn btn-primary"
          (click)="navigateToCourse(enrollment.courseId)"
        >
          Continue Course
        </button>

        <button
          type="button"
          class="btn btn-secondary"
          (click)="navigateToProgress(enrollment.enrollmentId)"
        >
          View Progress
        </button>

        <button
          *ngIf="enrollment.isCompleted"
          type="button"
          class="btn btn-outline"
          (click)="navigateToCertificate(enrollment.enrollmentId)"
        >
          Certificate
        </button>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div
    *ngIf="totalPages() > 1 && !loading() && !error()"
    class="pagination"
  >
    <button
      type="button"
      class="page-btn"
      [disabled]="pageNumber() === 1"
      (click)="goToPage(pageNumber() - 1)"
    >
      Previous
    </button>

    <span class="page-info">
      Page {{ pageNumber() }} of {{ totalPages() }}
    </span>

    <button
      type="button"
      class="page-btn"
      [disabled]="pageNumber() === totalPages()"
      (click)="goToPage(pageNumber() + 1)"
    >
      Next
    </button>
  </div>
</div>
